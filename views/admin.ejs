<!DOCTYPE html>
<html lang="en">

<head>
    <title>Admin Page</title>
</head>

<body>

    <h1>Admin Page to upload PDF</h1>

    <h2>Filter 1: Select Database</h2>
    <form id="myform4" action="/filter4" , method="POST" enctype="multipart/form-data">
        <label for="filterUP">Filter DB</label>
        <select name="filterUP" id="filterUP">
            <% dbList.forEach(function(name) { %>
                <option value="<%= name %>">
                    <%= name %>
                </option>
                <% }); %>
        </select>
        <button type="submit">Submit</button>
    </form>

    <h2>Filter 2: Select Collections</h2>
    <form id="myform5" action="/filter5" , method="POST" enctype="multipart/form-data">
        <label for="filterUP">Filter Collections</label>
        <select name="filterUP" id="filterUP">
        </select>

        <label for="pdfName">PDF Name</label>
        <input type="text" name="pdfName" id="pdfName" required>

        <br> <br>

        <label for="file">Select PDF</label>
        <input type="file" name="pdf">

        <button type="submit">Submit</button>
    </form>


    <!-- import jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

    <script>
        $(document).ready(function () {
            $('#myform4').submit(function (event) {
                event.preventDefault();
                const form = $(this);
                const url = form.attr('action');
                const data = form.serialize();
                // console.log(url);
                $.post(url, data, function (response) {
                    // console.log(response);
                    $("#myform5 select").empty();
                    response.forEach(function (name) {
                        $("#myform5 select").append(
                            '<option value="' + name + '">' + name + '</option>'
                        )
                    })

                });
            })

        })
    </script>
</body>

</html>