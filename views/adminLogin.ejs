<!DOCTYPE html>
<html lang="en">

<head>
    <title>Login Page</title>
</head>

<body>

    <h1>Choose Section: </h1>
    <form id="sectionForm" action="/section" method="POST" enctype="multipart/form-data">
        <label for="section">Select Section</label>
        <select name="section" id="section" required>
            <option value="qp" selected="selected">Question Paper</option>
            <option value="syllabus">Syllabus</option>
            <option value="notes">Notes</option>
        </select>
        <!-- <button type="submit">Submit</button> -->
    </form>

    <h2>Admin Login Page</h2>
    <form id="loginForm" action="/loginCred" method="POST">
        <label for="username">Username</label>
        <input type="text" name="username" id="username">
        <br><br>
        <label for="password">Password</label>
        <input type="password" name="password" id="password">

        <br><br>
        <button type="submit">Submit</button>
    </form>



    <div id="button">
    </div>



    <!-- import jQuery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>

    <script>
        $(document).ready(function () {
            $('#loginForm').submit(function (event) {
                event.preventDefault();
                const form = $(this);
                const url = form.attr('action');
                const user = $("#username").val();
                const pass = $("#password").val();
                const section = $("#section").val();
                const data = {
                    "username": user,
                    "password": pass,
                    "section": section,
                }

                console.log(data);

                $.post(url, data, function (response) {
                    console.log(response);
                    if (response == "loginTrue") {
                        // alert("Successfully Logged in!");
                        $("#button").empty();
                        $("#button").append(
                            '<br><br>', '<a href="/admin" id="adminLink" > Click here to redirect to admin page </a>'
                        )
                        $("#loginForm input").val('');
                        window.location.href = "/admin";


                    } else {
                        $("#button").empty();
                        alert("Incorrect Credentials! Please try again");
                    }

                });


            })

        })
    </script>



</body>

</html>